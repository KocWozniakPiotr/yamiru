#:kivy 2.1.0
#: import utils kivy.utils


#:set red_light '#c7185e'
#:set red_middle '#990842'
#:set red_dark '#560840'

#:set violet_light '#1d0842'
#:set violet_dark '#290840'

#:set purple_light '#0c0420'
#:set purple_dark '#0c061c'

<Button>
    size_hint: (None, None)
    background_color: utils.get_color_from_hex(violet_light)
    background_down: violet_light
    font_name: 'misc/pixel_type.ttf'
    font_size: 0.45 * self.height
    color: red_light
    width: self.parent.width - ((self.parent.height/12)*2)
    height: self.parent.height/12
    pos_hint: {'center_x':0.5,'center_y':0}

<Label>
    size_hint: (None, None)
    font_name: 'misc/pixel_type.ttf'
    color: red_light

<TextInput>
    font_name: 'misc/pixel_type.ttf'
    multiline: False
    halign: "center"
    valign: "middle"
    background_color: purple_dark if self.focus else purple_light
    canvas.before:
        Color:
            rgba: utils.get_color_from_hex(red_light)

WindowManager:
    Loader:
    MainWindow:
    CreationWindow:
    RestoreWindow:
    EnteringGame:
    UpdateScreen:
    SetupScreen:


<Loader>:
    name: "loader"
    BoxLayout:
        orientation: "vertical"
        size_hint: (None, None)
        size: root.xx, root.yy
        canvas.before:
            Color:
                rgba: utils.get_color_from_hex(purple_light)
            Rectangle:
                pos: self.pos
                size: self.size

        Image:
            id: dupa
            source: 'img/loading/0.png'
            size_hint: (None, None)
            keep_ratio: True
            allow_stretch: True
            width: root.xx
            height: root.yy

<MainWindow>:
    name: "main"
    BoxLayout:
        orientation: "vertical"
        size_hint: (None, None)
        size: root.xx, root.yy
        canvas.before:
            Color:
                rgba: utils.get_color_from_hex(purple_light)
            Rectangle:
                pos: self.pos
                size: self.size
            #    source: 'img/images.jpg'
        Label:
            text: '- SCIONS  OF  ASYLLION -'
            font_size: 0.45 * self.height
            width: self.parent.width
            height: self.parent.height/12
            size_hint: (None, None)

        Image:
            id: logo
            source: ''
            size_hint: (None, None)
            allow_stretch: True
            keep_ratio: True
            anim_loop: 0
            keep_data: True
            anim_delay: 0
            width: self.parent.width
            height: self.parent.height/2

        Button:
            size_hint: (None, None)
            text: "new  player"
            on_press: root.new_player_btn()
            on_release:
                app.root.current = "creation"
                root.manager.transition.direction = "left"

        Button:
            size_hint: (None, None)
            text: "returning  player"
            on_press: root.returning_player_btn()
            on_release:
                app.root.current = "restore"
                root.manager.transition.direction = "left"

        Label:
            text: ""
            size_hint: (None, None)
            width: self.parent.width
            height: self.parent.height/12
            font_name: 'misc/pixel_type.ttf'
            font_size: self.width/16
            color: red_light

<CreationWindow>:
    name: "creation"

    BoxLayout:
        orientation: 'vertical'
        size_hint: (None, None)
        size: root.xx, root.yy
        canvas.before:
            Color:
                rgba: utils.get_color_from_hex(purple_light)
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            id: warn
            opacity: 0
            halign: "center"
            text: root._output
            font_size: self.width/16
            color: purple_light
            width: self.parent.width
            height: self.parent.height/12
            size_hint: (None, None)
            canvas.before:
                Color:
                    rgba: utils.get_color_from_hex(red_light)
                Rectangle:
                    pos: self.pos
                    size: self.size

        Image:
            id: kitty
            source: ''
            allow_stretch: True
            keep_ratio: True
            anim_loop: 0
            keep_data: True
            anim_delay: 0
            size_hint: (None, None)
            width: root.xx
            height: root.yy/3

        Label:
            text: 'Would  you  like  to  backup  you  profile  locally ?' + '\n' + '\n' + 'Local  backup  is  saved  in  a  form  of  a  picture.' + '\n' + 'You  can  store  it  later  wherever  you  want' + '\n' + 'for  restoring  your  account  in  the  future.'
            width: self.parent.width
            height: self.parent.height/12
            size_hint: (None, None)
            font_size: self.width/16
            pos_hint: {'center_x':0.5,'center_y':0}

        GridLayout:
            cols: 2
            padding : '-30dp', '50dp'
            spacing: '-30dp', '40dp'
            row_default_height: '30dp'
            pos_hint: {'center_x':0.4,'center_y':0}

            Label:
                text: 'yes,  backup  it  up  right  now'
                width: self.parent.width
                height: self.parent.height/12 + sp(10)
                size_hint: (None, None)
                font_size: self.width/16
                halign: "left"

            CheckBox:
                id: allow_id
                group: 'check'
                color: '#990842'
                active: True
                on_active: root._allow = str(self.active)
                on_press: root.checkbox_allow_btn(self, self.active)
                canvas.before:
                    Rectangle:
                        source: 'img/radio_btn.png'
                        size: sp(24), sp(24)
                        pos: int(self.center_x - sp(12)), int(self.center_y - sp(12))

            Label:
                text: 'please  let  me  decide  later . . .'
                width: self.parent.width
                height: self.parent.height/12 + sp(10)
                size_hint: (None, None)
                font_size: self.width/16
                halign: "left"

            CheckBox:
                id: deny_id
                active: False
                group: 'check'
                color: '#990842'
                on_active: root._deny = str(self.active)
                on_press: root.checkbox_deny_btn(self, self.active)
                canvas.before:
                    Rectangle:
                        source: 'img/radio_btn.png'
                        size: sp(24), sp(24)
                        pos: int(self.center_x - sp(12)), int(self.center_y - sp(12))



        Button:
            text: "create  an  account"
            size_hint: (None, None)
            on_press: root.create_account_btn()

        Button:
            text: "<  back"
            size_hint: (None, None)
            on_press: root.back_btn()
            on_release:
                app.root.current = "main"
                root.manager.transition.direction = "right"

        Label:
            text: ''
            width: self.parent.width
            height: self.parent.height/12
            font_size: 0.45 * self.height
            size_hint: (None, None)


<RestoreWindow>:
    name: "restore"

    BoxLayout:
        orientation: "vertical"
        size: root.xx, root.yy
        size_hint: (None, None)
        canvas.before:
            Color:
                rgba: utils.get_color_from_hex(purple_light)
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            id: warn
            opacity: 0
            text: root._output
            font_size: self.width/16
            color: purple_light
            width: self.parent.width
            height: self.parent.height/12
            size_hint: (None, None)
            canvas.before:
                Color:
                    rgba: utils.get_color_from_hex(red_light)
                Rectangle:
                    pos: self.pos
                    size: self.size

        Image:
            id: doggy
            source: ''
            allow_stretch: True
            keep_ratio: True
            anim_loop: 0
            keep_data: True
            anim_delay: 0
            size_hint: (None, None)
            width: root.xx
            height: root.yy/3

        Label:
            text:'If  you  already  have  an  account  and  made' + '\n' + 'a  backup  of  your  profile  in  the  past,' + '\n' + 'you  can  restore  it  here.' + '\n' + '\n' + 'Your  backup  is  saved  in  Pictures  by  default.' + '\n' + 'If  you  moved  it  somewhere  else,' + '\n' + 'please  place  it  back  to  the  Pictures  directory.'
            size_hint: (None, None)
            width: self.parent.width
            height: self.parent.height/3
            font_size: self.width/16
            pos_hint: {'center_x':0.5,'center_y':0}

        Button:
            text: "restore  profile"
            size_hint: (None, None)
            on_press: root.restore_btn()

        Button:
            text: "<  back"
            size_hint: (None, None)
            on_press: root.back_btn()
            on_release:
                app.root.current = "main"
                root.manager.transition.direction = "right"

        Label:
            text: ''
            width: self.parent.width
            height: self.parent.height/12
            size_hint: (None, None)

<EnteringGame>:
    name: "entering_game"
    BoxLayout:
        orientation: "vertical"
        size_hint: (None, None)
        size: root.xx, root.yy
        canvas.before:
            Color:
                rgba: utils.get_color_from_hex(purple_light)
            Rectangle:
                pos: self.pos
                size: self.size

<UpdateScreen>:
    name: "update"
    BoxLayout:
        orientation: "vertical"
        size_hint: (None, None)
        size: root.xx, root.yy
        canvas.before:
            Color:
                rgba: utils.get_color_from_hex(purple_light)
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            text: 'a  new  version  of  the  game  is  available' + '\n' + 'update  to  continue . . .'
            halign: 'center'
            font_size: 0.45 * (root.yy/12)
            width: self.parent.width
            height: self.parent.height/3
            # font_size: self.width/16
            size_hint: (None, None)

        Button:
            text: 'update'
            size_hint: (None, None)
            on_press: root.update_btn()

        Label:
            text: ''
            width: self.parent.width
            height: self.parent.height/12
            size_hint: (None, None)

<SetupScreen>:
    name: "setup"
    BoxLayout:
        orientation: "vertical"
        size_hint: (None, None)
        size: root.xx, root.yy
        canvas.before:
            Color:
                rgba: utils.get_color_from_hex(purple_light)
            Rectangle:
                pos: self.pos
                size: self.size

        Label:
            id: warn
            opacity: 0
            text: root._output
            font_size: self.width/16
            color: purple_light
            width: self.parent.width
            height: self.parent.height/12
            size_hint: (None, None)
            canvas.before:
                Color:
                    rgba: utils.get_color_from_hex(red_light)
                Rectangle:
                    pos: self.pos
                    size: self.size


        TextInput:
            disabled: False
            id: input_nick
            text: ''
            size: root.xx, root.yy/12
            font_size: (0.45 * root.yy/12) * 2
            size_hint: (None, None)


        Label:
            id: status
            text: 'create  your  nickname'
            halign: 'center'
            font_size: 0.45 * (root.yy/12)
            width: self.parent.width
            height: self.parent.height/3
            # font_size: self.width/16
            size_hint: (None, None)

        Button:
            text: 'confirm'
            size_hint: (None, None)
            on_press: root.validate_btn(input_nick.text)

        Label:
            text: ''
            width: self.parent.width
            height: self.parent.height/12
            size_hint: (None, None)
